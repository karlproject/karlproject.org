==========================
Policies: People Directory
==========================

The ``People`` tab in KARL leads to the People Directory.  This
document describes the screens and user stories for ``People``.

.. _generic-people-policies:

Generic People Policies
=======================

Policies that apply to all sceens in People:

- Shown in the generic layout

- All logged-in users can get to this URL

- Under the URL space of ``/people/``

- All Section Indexes and Reports are expected to:

  - Show ``People`` above the tabs in the "page heading" slot

  - Highlight the tab/section that matches the context

.. _show-people-policies:

Show People
===========

- At the URL ``/people/``

- Arrived at by clicking on the ``People`` tab

- Presents a tabbed interface for each Section

- The role of the requesting user determines:

  - What tabs are displayed

  - In what order

- The first tab/section is the default selected section

- The configuration data determines:

  - Which tab/section, in what order, are displayed for certain users

  - The labels for each tab/section

  - The heading displayed when the section is selected.  Might be
    longer than the name on the tab.

- Administrators will have certain actions (defined below) that appear
  in the actions box


.. _show-section-policies:

Show Section
============

A "Section" equates to one of the tabs in the user interface.  It is a
way to divide the People directory into, well, sections.  Below are
policies common to all kinds of Sections:

- As mentioned above, the configuration data determines the label on
  the tab and the heading on the page (same as HTML title)

- A Section can contain one or more Reports (discussed below).

- The Reports in a Section.

- A Section with only one report, shows that Report by default.

- Each Section has security on its URL view

- A Section that defines multiple Reports has either an autogenerated
  alphabetical listing of Reports, or a Section Indexes that provides
  a coverpage for that section.

.. _show-section-layout-policies:

Show Section Index
==================

- Shown as the content for a Section that has multiple Reports.

- This Section Index is most likely driven by configuration data, with
  a customizer option (e.g. adapter) for painting outside the lines.
  (This is an implementation detail, subject to change.)

- Each Section Index has two columns.

- Reports or Report Groups can go each column, driven by
  configuration.

- A Report Group has a heading and an ordered listing of Report links.

- Each Report Group has two piles: priority and general.  Reports
  links in the priority pile are displayed first, in the order defined
  in the configuation, and with a different layout (italics.)  Reports
  in the general listing are displayed in the order defined in the
  configuration, without emphasis.

.. _generic-report-policies:

Generic Report Policies
=======================

- Display a report title, just inside the tabbox for the sections

- Floated right, show a box with icons for sub-actions (print,
  download as CSV).  Use Jason's jQuery UI style for the buttons.

- The report title might be different than the label on the tab.

- Most information for this report (tab label, report title, etc.) is
  driven by configuration

- Show an icon to download all profile records in the current report
  as CSV.

- Show an icon that leads to a printable view of the current report
  (again, same as Jason's current approach, including the auto-print
  JS).

- Results are displayed using the :ref:`grid-table-policies`

- The columns, column names, sortability of a column, cell layout,
  etc. are driven by configuration.

- The security policy governs whether a profile is displayed in a
  certain report.

- All reports show the :ref:`letter-box-policies`

- All reports have a sub-menu link, just above the columns, floated
  right, that toggles between ``Picture View`` and ``Tabular View``

- Some reports might need to show an info panel, e.g. the organization
  address information at:
  https://karl.soros.org/people/searches/open-society-foundation-for-albania/

- That info panel is a hot-bed for drip-drip torture of exceptions to
  the rules and endless microcustomization.  Plan accordingly.

- Data for that info panel comes from configuration.


.. _show-allkarl-report-policies:

Show All KARL Report
====================

This is an example of one report that will ship with KARL.

- Arrived at by clicking on the ``People`` tab and selecting the ``All
  KARL`` Section.

- Displays ``All KARL`` as the Report heading, just inside the tabbox

- The "ALL KARL" tabbox should be highlighted

- Available to any staff or affiliate

- Columns, in order:

  - Name.

  - Organization.

  - Location.

  - Email.


.. _advanced-edit-profile-policies:

Advanced Edit Profile
=====================

We plan to eliminate the KARL 2.1 "User Manager" by building the
features into the KARL UI.  That is, to get a certain listing of users
and find a particular user, leverage the People directory.  To modify
a user, use the profile editing facilities.




Download CSV
============


Questions
=========
